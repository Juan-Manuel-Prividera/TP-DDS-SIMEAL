{{> templates/navbar}}
<body>
<div class="container-supremo-suscripcion">
    <div class="container-frase-btn">
        <div class="titulo-suscripcion">
            <h1>Quiere ser notificado cuando: </h1>
        </div>
        <div class="tarjeta-btns-suscripcion ml-auto mr-auto">
            <form method="POST" action="/heladera/suscribirse/{{heladera.id}}" class="form-suscripciones">
            <div class="btn-con-input">
                <div class="btn-con-check">
                <a onclick="mostrarInput('inputInsuficientes')" >
                    <button type="button" class="btn btn-dark"> Haya Viandas Insuficientes</button>
                </a>
                <input name="checkViandasInsuficientes" id="check-viandas-insuficientes" type="checkbox" value="true" />
                </div>
                <div class="input-suscripcion" id="inputInsuficientes" style="display: none;">
                    <input name="cantViandasInsuficientes" type="number" placeholder="Introduce la cantidad" />
                </div>
            </div>
            <div class="btn-con-input">
                <div class="btn-con-check">
                    <a onclick="mostrarInput('inputMuchas')">
                        <button type="button" class="btn btn-dark">Haya Muchas Viandas</button>
                    </a>
                    <input name="checkMuchasViandas" id="check-muchas-viandas" type="checkbox" value="true" />
                </div>
                <div class="input-suscripcion" id="inputMuchas" style="display: none;">
                    <input  name="cantMuchasViandas" type="number" placeholder="Introduce la cantidad" />
                </div>
            </div>
            <div class="btn-con-input">
                <div class="btn-con-check">
                    <a>
                        <button type="button" class="btn btn-dark">Ocurra un Desperfecto</button>
                    </a>
                    <input name="checkDesperfecto" id="check-desperfecto" type="checkbox" value="true" />
                </div>
            </div>
            <a class="a-btn">
                <button type="submit" class="btn btn-custom btn-info mb-4" onclick="validarSuscripcion()">Confirmar suscripción</button>
            </a>
            </form>
        </div>
    </div>
    <div class="status-container">
        <div class="info-heladera mb-5">
            <img src="/img/heladera.png" alt="icon" class="logo-peque ml-3 mr-5">
            <div>
                <p>Nombre: {{heladera.nombre}}</p>
                <p>Ubicacion: {{heladera.nombreCalle}} {{heladera.altura}}</p>
            </div>
        </div>
         <div class="status-heladera mb-5">
            <p class="mt-3 ml-3">Estado: {{heladera.activa}}</p>
            <p class="mb-3 ml-3">Ultima temperatura registrada: {{heladera.ultimaTempRegistrada}}°C</p>
        </div>
    </div>

</div>
</body>
<script>
    function mostrarInput(inputId) {
        // Ocultar todos los inputs
        const inputElement = document.getElementById(inputId);        // Verificar si el input ya está visible
        if (inputElement.style.display === 'block') {
            inputElement.style.display = 'none'; // Ocultar el input
        } else {
            // Ocultar todos los inputs
            const inputs = document.querySelectorAll('div[id^="input"]');
            inputs.forEach(input => {
                input.style.display = 'none';
            });

            // Mostrar el input correspondiente
            inputElement.style.display = 'block';
        }
    }

    function validarSuscripcion() {
        // Obtén los checkboxes
        const checkInsuficientes = document.getElementById('check-viandas-insuficientes');
        const inputInsuficientes = document.getElementById('inputInsuficientes').querySelector('input[type="number"]').value;

        const checkMuchas = document.getElementById('check-muchas-viandas');
        const inputMuchas = document.getElementById('inputMuchas').querySelector('input[type="number"]').value;

        const checkDesperfecto = document.getElementById('check-desperfecto');

        let isValid = true; // Variable para comprobar la validez

        // Verifica si el checkbox de Viandas Insuficientes está marcado
        if (checkInsuficientes.checked) {
            if (!inputInsuficientes) {
                alert('Por favor, introduce una cantidad para "Haya Viandas Insuficientes".');
                isValid = false;
            }
        }

        // Verifica si el checkbox de Muchas Viandas está marcado
        if (checkMuchas.checked) {
            if (!inputMuchas) {
                alert('Por favor, introduce una cantidad para "Haya Muchas Viandas".');
                isValid = false;
            }
        }

        // Verifica el checkbox de Ocurra un Desperfecto (no tiene input, pero puedes agregar lógica si es necesario)
        if (checkDesperfecto.checked) {
            // Aquí puedes agregar validaciones específicas para este checkbox si es necesario
        }

        // Si todo es válido
        if (isValid) {
            alert('Suscripción confirmada con éxito!');
            // Aquí puedes agregar la lógica para proceder con la suscripción
        }
    }

</script>